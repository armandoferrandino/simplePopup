(function(b){var a={init:function(c,e){modal=this;var d=b.extend({bgcolor:"#FBFBFB",boxshadow:"#424242",width:"650",height:"250",draggable:false,closebutton:true,cursor:"default",notoverlap:false},c);b(this).addClass("simplePopupContainer");if(d.draggable){b(this).draggable({containment:"window"});if(typeof(c)!="undefined"){if(typeof(c.cursor)=="undefined"){d.cursor="move"}}}if(d.closebutton){b(this).append('<div class="close_button"></div>');b(".close_button").click(function(){parent_modal=b(this).closest(".simplePopupContainer");b(parent_modal).simplePopup("close")})}if(b(".simplemodal_close_button").length!=0){b(".simplemodal_close_button").click(function(){parent_modal=b(this).closest(".simplePopupContainer");b(parent_modal).simplePopup("close")})}b(this).simplePopup("moveToTop");b(this).unbind("click");b(this).click(function(){b(this).simplePopup("moveToTop")});if(d.notoverlap&&b(".simplePopupContainer:visible").length>=1){if(b("#"+b(this).attr("id")+":visible").length==0){max_top=0;max_left=0;b(".simplePopupContainer:visible").each(function(){if(parseInt(b(this).css("left"))>max_left){max_left=parseInt(b(this).css("left"))}if(parseInt(b(this).css("top"))>max_top){max_top=parseInt(b(this).css("top"))}});left_position=max_left+20;top_position=max_top+20}else{left_position=parseInt(b("#"+b(this).attr("id")).css("left"));top_position=parseInt(b("#"+b(this).attr("id")).css("top"))}}else{left_position=(b(window).width()/2)-(d.width/2);top_position=(b(window).height()/2)-(d.height/2)}b(this).css("background-color",d.bgcolor).css("box-shadow","2px 2px 6px "+d.boxshadow).css("height",d.height+"px").css("width",d.width+"px").css("cursor",d.cursor).css("left",left_position+"px").css("top",top_position+"px");if(typeof(e)=="undefined"){return this}else{b(this).simplePopup(e)}},open:function(){b(this).show();return this},close:function(){b(this).hide();return this},destroy:function(){b(this).remove();return this},moveToTop:function(){b(".simplePopupContainer").removeClass("simplePopupOnTop").css("z-index","777777");b(this).addClass("simplePopupOnTop").css("z-index","999999");return this},closeAll:function(){b(".simplePopupContainer").hide();return this},openAll:function(){b(".simplePopupContainer").show();return this}};b.fn.simplePopup=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Il metodo "+c+" non esiste in simplePopup!")}}}}(jQuery));